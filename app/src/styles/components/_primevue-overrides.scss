// PrimeVue Component Overrides for Dark Mode Support
// This file contains specific overrides to ensure all PrimeVue components
// work correctly in both light and dark modes

// Ensure all overlays respect dark mode
.p-component-overlay {
  background: var(--surface-overlay) !important;
  color: var(--text-color) !important;
}

// Fix all dropdown-like components in dark mode
.p-dropdown-panel,
.p-multiselect-panel,
.p-autocomplete-panel,
.p-cascadeselect-panel,
.p-treeselect-panel {
  background: var(--surface-overlay) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-dropdown-item,
  .p-multiselect-item,
  .p-autocomplete-item,
  .p-cascadeselect-item,
  .p-treeselect-item {
    color: var(--text-color) !important;
    
    &:hover {
      background: var(--surface-hover) !important;
    }
    
    &.p-highlight {
      background: var(--primary-color-alpha) !important;
      color: var(--primary-color) !important;
    }
  }
}

// InputText fixes - ensure borders are visible
.p-inputtext {
  background: var(--surface-card);
  border: 1px solid var(--surface-border);
  color: var(--text-color);
  transition: border-color 0.2s, box-shadow 0.2s;
  
  &:not(.p-disabled):hover {
    border-color: var(--primary-color);
  }
  
  &:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--primary-color-alpha);
    outline: 0 none;
  }
  
  &.p-invalid {
    border-color: var(--red-500);
  }
  
  &.p-disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  &::placeholder {
    color: var(--text-color-secondary);
  }
}

// Password component fixes - ensure borders are visible
.p-password {
  &.p-inputwrapper {
    .p-inputtext {
      background: var(--surface-card);
      border: 1px solid var(--surface-border);
      color: var(--text-color);
      transition: border-color 0.2s, box-shadow 0.2s;
      
      &:not(.p-disabled):hover {
        border-color: var(--primary-color);
      }
      
      &:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px var(--primary-color-alpha);
        outline: 0 none;
      }
      
      &.p-invalid {
        border-color: var(--red-500);
      }
      
      &.p-disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
    }
  }
}

// Calendar/DatePicker fixes
.p-datepicker {
  background: var(--surface-overlay) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-datepicker-header {
    background: var(--surface-overlay) !important;
    color: var(--text-color) !important;
    border-bottom: 1px solid var(--surface-border) !important;
  }
  
  .p-datepicker-calendar td {
    color: var(--text-color) !important;
    
    &.p-datepicker-today > span {
      background: var(--primary-color-alpha) !important;
      color: var(--primary-color) !important;
    }
    
    &:not(.p-disabled):not(.p-datepicker-other-month):hover > span {
      background: var(--surface-hover) !important;
    }
  }
  
  .p-monthpicker-month,
  .p-yearpicker-year {
    color: var(--text-color) !important;
    
    &:hover {
      background: var(--surface-hover) !important;
    }
    
    &.p-highlight {
      background: var(--primary-color) !important;
      color: var(--primary-color-text) !important;
    }
  }
}

// Context Menu fixes
.p-contextmenu,
.p-tieredmenu,
.p-menubar {
  background: var(--surface-overlay) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-menuitem-link {
    color: var(--text-color) !important;
    
    &:hover {
      background: var(--surface-hover) !important;
    }
    
    .p-menuitem-icon,
    .p-menuitem-text {
      color: inherit !important;
    }
  }
  
  .p-submenu-list {
    background: var(--surface-overlay) !important;
    border: 1px solid var(--surface-border) !important;
  }
}

// Select Button fixes
.p-selectbutton {
  .p-button {
    background: var(--surface-0) !important;
    border: 1px solid var(--surface-border) !important;
    color: var(--text-color) !important;
    
    &:hover {
      background: var(--surface-hover) !important;
    }
    
    &.p-highlight {
      background: var(--primary-color) !important;
      border-color: var(--primary-color) !important;
      color: var(--primary-color-text) !important;
    }
  }
}

// TabView fixes
.p-tabview {
  .p-tabview-nav {
    background: var(--surface-ground) !important;
    border: 1px solid var(--surface-border) !important;
    
    li {
      .p-tabview-nav-link {
        background: transparent !important;
        border: 1px solid transparent !important;
        color: var(--text-color-secondary) !important;
        
        &:hover {
          background: var(--surface-hover) !important;
          border-color: var(--surface-border) !important;
          color: var(--text-color) !important;
        }
      }
      
      &.p-highlight {
        .p-tabview-nav-link {
          background: var(--surface-card) !important;
          border-color: var(--surface-border) !important;
          color: var(--primary-color) !important;
        }
      }
    }
  }
  
  .p-tabview-panels {
    background: var(--surface-card) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
    border-top: 0 !important;
  }
}

// Accordion fixes
.p-accordion {
  .p-accordion-tab {
    background: var(--surface-card) !important;
    border: 1px solid var(--surface-border) !important;
    margin-bottom: 2px;
    
    .p-accordion-header {
      .p-accordion-header-link {
        background: var(--surface-ground) !important;
        color: var(--text-color) !important;
        border: 1px solid var(--surface-border) !important;
        
        &:hover {
          background: var(--surface-hover) !important;
        }
      }
    }
    
    &.p-accordion-tab-active {
      .p-accordion-header {
        .p-accordion-header-link {
          background: var(--surface-card) !important;
          border-color: var(--primary-color) !important;
        }
      }
    }
    
    .p-accordion-content {
      background: var(--surface-card) !important;
      color: var(--text-color) !important;
      border: 1px solid var(--surface-border) !important;
      border-top: 0 !important;
    }
  }
}

// Panel fixes
.p-panel {
  background: var(--surface-card) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-panel-header {
    background: var(--surface-ground) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
    border-width: 0 0 1px 0 !important;
  }
  
  .p-panel-content {
    background: var(--surface-card) !important;
    color: var(--text-color) !important;
  }
  
  .p-panel-footer {
    background: var(--surface-ground) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
    border-width: 1px 0 0 0 !important;
  }
}

// Fieldset fixes
.p-fieldset {
  background: var(--surface-card) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-fieldset-legend {
    background: var(--surface-card) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
  }
  
  .p-fieldset-content {
    background: var(--surface-card) !important;
    color: var(--text-color) !important;
  }
}

// Sidebar fixes
.p-sidebar {
  background: var(--surface-overlay) !important;
  color: var(--text-color) !important;
  border: 0 !important;
  box-shadow: var(--shadow-2xl) !important;
  
  .p-sidebar-header {
    padding: 1.25rem !important;
    
    .p-sidebar-close {
      width: 2rem !important;
      height: 2rem !important;
      color: var(--text-color-secondary) !important;
      border: 0 !important;
      background: transparent !important;
      border-radius: 50% !important;
      transition: all var(--transition-duration) !important;
      
      &:enabled:hover {
        color: var(--text-color) !important;
        background: var(--surface-hover) !important;
      }
    }
  }
  
  .p-sidebar-content {
    padding: 0 1.25rem 1.25rem !important;
  }
}

// Tooltip fixes
.p-tooltip {
  .p-tooltip-text {
    background: var(--surface-900) !important;
    color: var(--surface-0) !important;
    border-radius: var(--border-radius-sm) !important;
    box-shadow: var(--shadow-lg) !important;
    font-size: 0.875rem !important;
    padding: 0.5rem 0.75rem !important;
  }
  
  .p-tooltip-arrow {
    border-color: transparent transparent var(--surface-900) transparent !important;
  }
  
  &.p-tooltip-top {
    .p-tooltip-arrow {
      border-color: var(--surface-900) transparent transparent transparent !important;
    }
  }
  
  &.p-tooltip-right {
    .p-tooltip-arrow {
      border-color: transparent var(--surface-900) transparent transparent !important;
    }
  }
  
  &.p-tooltip-left {
    .p-tooltip-arrow {
      border-color: transparent transparent transparent var(--surface-900) !important;
    }
  }
}

// Message & InlineMessage fixes
.p-message {
  background: var(--surface-overlay) !important;
  border: 1px solid var(--surface-border) !important;
  color: var(--text-color) !important;
  
  &.p-message-info {
    background: rgba(59, 130, 246, 0.1) !important;
    border-color: rgba(59, 130, 246, 0.3) !important;
    color: var(--text-color) !important;
    
    .p-message-icon {
      color: #3b82f6 !important;
    }
  }
  
  &.p-message-success {
    background: rgba(16, 185, 129, 0.1) !important;
    border-color: rgba(16, 185, 129, 0.3) !important;
    color: var(--text-color) !important;
    
    .p-message-icon {
      color: #10b981 !important;
    }
  }
  
  &.p-message-warn {
    background: rgba(245, 158, 11, 0.1) !important;
    border-color: rgba(245, 158, 11, 0.3) !important;
    color: var(--text-color) !important;
    
    .p-message-icon {
      color: #f59e0b !important;
    }
  }
  
  &.p-message-error {
    background: rgba(239, 68, 68, 0.1) !important;
    border-color: rgba(239, 68, 68, 0.3) !important;
    color: var(--text-color) !important;
    
    .p-message-icon {
      color: #ef4444 !important;
    }
  }
}

// Chip fixes
.p-chip {
  background: var(--surface-100) !important;
  color: var(--text-color) !important;
  
  .p-chip-remove-icon {
    color: var(--text-color-secondary) !important;
    
    &:hover {
      color: var(--text-color) !important;
    }
  }
}

// Badge fixes
.p-badge {
  background: var(--primary-color) !important;
  color: var(--primary-color-text) !important;
  
  &.p-badge-secondary {
    background: var(--surface-500) !important;
    color: var(--surface-0) !important;
  }
  
  &.p-badge-success {
    background: #10b981 !important;
  }
  
  &.p-badge-info {
    background: #3b82f6 !important;
  }
  
  &.p-badge-warning {
    background: #f59e0b !important;
  }
  
  &.p-badge-danger {
    background: #ef4444 !important;
  }
}

// Breadcrumb fixes
.p-breadcrumb {
  background: var(--surface-ground) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-breadcrumb-list {
    li {
      .p-menuitem-link {
        color: var(--text-color-secondary) !important;
        
        &:hover {
          color: var(--text-color) !important;
        }
      }
      
      &.p-menuitem-separator {
        color: var(--text-color-secondary) !important;
      }
    }
  }
}

// Steps fixes
.p-steps {
  .p-steps-item {
    .p-menuitem-link {
      background: var(--surface-ground) !important;
      color: var(--text-color-secondary) !important;
      
      .p-steps-number {
        background: var(--surface-overlay) !important;
        color: var(--text-color) !important;
        border: 2px solid var(--surface-border) !important;
      }
      
      &:not(.p-disabled):hover {
        background: var(--surface-hover) !important;
        
        .p-steps-number {
          background: var(--surface-hover) !important;
        }
      }
    }
    
    &.p-highlight {
      .p-menuitem-link {
        .p-steps-number {
          background: var(--primary-color) !important;
          color: var(--primary-color-text) !important;
          border-color: var(--primary-color) !important;
        }
        
        .p-steps-title {
          color: var(--text-color) !important;
          font-weight: 600 !important;
        }
      }
    }
  }
}

// ScrollPanel fixes
.p-scrollpanel {
  .p-scrollpanel-bar {
    background: var(--surface-300) !important;
    border: 0 !important;
    
    &:hover {
      background: var(--surface-400) !important;
    }
  }
}

// Tree fixes
.p-tree {
  background: var(--surface-card) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-tree-node {
    .p-tree-node-content {
      color: var(--text-color) !important;
      
      &:hover {
        background: var(--surface-hover) !important;
      }
      
      &.p-highlight {
        background: var(--primary-color-alpha) !important;
        color: var(--primary-color) !important;
      }
    }
  }
}

// TreeTable fixes
.p-treetable {
  .p-treetable-header {
    background: var(--surface-ground) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
  }
  
  .p-treetable-thead > tr > th {
    background: var(--surface-50) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
  }
  
  .p-treetable-tbody > tr {
    background: var(--surface-card) !important;
    color: var(--text-color) !important;
    
    > td {
      border: 1px solid var(--surface-border) !important;
    }
    
    &:hover {
      background: var(--surface-hover) !important;
    }
  }
  
  .p-treetable-footer {
    background: var(--surface-ground) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--surface-border) !important;
  }
}

// Paginator fixes
.p-paginator {
  background: var(--surface-ground) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-paginator-element {
    color: var(--text-color-secondary) !important;
    
    &:not(.p-disabled):not(.p-highlight):hover {
      background: var(--surface-hover) !important;
      color: var(--text-color) !important;
    }
    
    &.p-highlight {
      background: var(--primary-color) !important;
      color: var(--primary-color-text) !important;
    }
  }
}

// PickList & OrderList fixes
.p-picklist,
.p-orderlist {
  .p-picklist-list-wrapper,
  .p-orderlist-list-wrapper {
    background: var(--surface-card) !important;
    border: 1px solid var(--surface-border) !important;
  }
  
  .p-picklist-item,
  .p-orderlist-item {
    background: var(--surface-card) !important;
    color: var(--text-color) !important;
    
    &:hover {
      background: var(--surface-hover) !important;
    }
    
    &.p-highlight {
      background: var(--primary-color-alpha) !important;
      color: var(--primary-color) !important;
    }
  }
}

// InputNumber fixes
.p-inputnumber {
  .p-inputnumber-button {
    background: var(--surface-50) !important;
    color: var(--text-color-secondary) !important;
    border: 1px solid var(--surface-border) !important;
    
    &:hover {
      background: var(--surface-hover) !important;
      color: var(--text-color) !important;
    }
    
    &:active {
      background: var(--primary-color-alpha) !important;
      color: var(--primary-color) !important;
    }
  }
}

// Slider fixes
.p-slider {
  background: var(--surface-300) !important;
  
  .p-slider-range {
    background: var(--primary-color) !important;
  }
  
  .p-slider-handle {
    background: var(--primary-color) !important;
    border: 2px solid var(--primary-color) !important;
    
    &:hover {
      background: var(--primary-600) !important;
      border-color: var(--primary-600) !important;
    }
  }
}

// Rating fixes
.p-rating {
  .p-rating-item {
    color: var(--text-color-secondary) !important;
    
    &.p-rating-item-active {
      color: var(--primary-color) !important;
    }
  }
}

// FileUpload fixes
.p-fileupload {
  background: var(--surface-card) !important;
  border: 1px solid var(--surface-border) !important;
  
  .p-fileupload-buttonbar {
    background: var(--surface-ground) !important;
    border-bottom: 1px solid var(--surface-border) !important;
  }
  
  .p-fileupload-content {
    background: var(--surface-card) !important;
  }
}

// ProgressBar fixes
.p-progressbar {
  background: var(--surface-300) !important;
  
  .p-progressbar-value {
    background: var(--primary-color) !important;
  }
}

// Divider fixes
.p-divider {
  &:before {
    border-color: var(--surface-border) !important;
  }
  
  &.p-divider-horizontal {
    &:before {
      border-top-color: var(--surface-border) !important;
    }
  }
  
  &.p-divider-vertical {
    &:before {
      border-left-color: var(--surface-border) !important;
    }
  }
  
  .p-divider-content {
    background: var(--surface-card) !important;
    color: var(--text-color-secondary) !important;
  }
}

// Skeleton fixes
.p-skeleton {
  background: var(--surface-200) !important;
  
  &:after {
    background: linear-gradient(90deg, transparent, var(--surface-50), transparent) !important;
  }
}

// Global fixes for all inputs in dark mode
.dark,
.app-dark {
  input,
  textarea,
  select {
    color-scheme: dark;
  }
}

// Checkbox fixes - ensure borders are visible
.p-checkbox {
  .p-checkbox-box {
    border: 2px solid var(--surface-border);
    background: var(--surface-card);
    transition: background-color 0.2s, border-color 0.2s, box-shadow 0.2s;
    
    &:hover {
      border-color: var(--primary-color);
    }
    
    &.p-highlight {
      background: var(--primary-color);
      border-color: var(--primary-color);
      
      .p-checkbox-icon {
        color: var(--primary-color-text);
      }
    }
  }
  
  &.p-checkbox-focused {
    .p-checkbox-box {
      box-shadow: 0 0 0 2px var(--surface-ground), 0 0 0 4px var(--primary-color-alpha);
    }
  }
  
  &.p-invalid {
    .p-checkbox-box {
      border-color: var(--red-500);
    }
  }
  
  &.p-disabled {
    .p-checkbox-box {
      opacity: 0.6;
      cursor: not-allowed;
    }
  }
}

// Select (formerly Dropdown) fixes - ensure borders are visible
.p-select {
  background: var(--surface-card);
  border: 1px solid var(--surface-border);
  color: var(--text-color);
  transition: border-color 0.2s, box-shadow 0.2s;
  
  &:not(.p-disabled):hover {
    border-color: var(--primary-color);
  }
  
  &.p-focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--primary-color-alpha);
    outline: 0 none;
  }
  
  &.p-invalid {
    border-color: var(--red-500);
  }
  
  &.p-disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  .p-select-label {
    color: var(--text-color);
    
    &.p-placeholder {
      color: var(--text-color-secondary);
    }
  }
  
  .p-select-trigger {
    color: var(--text-color-secondary);
  }
}

.p-select-panel {
  background: var(--surface-overlay);
  color: var(--text-color);
  border: 1px solid var(--surface-border);
  box-shadow: var(--shadow-lg);
  
  .p-select-items {
    .p-select-item {
      color: var(--text-color);
      
      &:not(.p-disabled):hover {
        background: var(--surface-hover);
      }
      
      &.p-highlight {
        background: var(--primary-color-alpha);
        color: var(--primary-color);
      }
      
      &.p-focus {
        background: var(--surface-hover);
        outline: 0 none;
      }
    }
  }
  
  .p-select-filter {
    background: var(--surface-card);
    border: 1px solid var(--surface-border);
    color: var(--text-color);
    margin: 0.5rem;
    
    &:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px var(--primary-color-alpha);
      outline: 0 none;
    }
  }
}
